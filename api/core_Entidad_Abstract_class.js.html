<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: core/Entidad_Abstract_class.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: core/Entidad_Abstract_class.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @class Entidad_Abstracta
 * @extends Dom
 * @description Clase abstracta base para todas las entidades del sistema.
 * Esta clase proporciona la funcionalidad base para la gestión de entidades, incluyendo:
 * - Gestión de formularios (creación, carga, validación)
 * - Operaciones CRUD (ADD, EDIT, DELETE, SEARCH)
 * - Manejo de tablas de datos
 * - Integración con validaciones y tests
 * - Gestión de archivos y datos especiales
 * 
 * @property {string} entidad - Nombre de la entidad
 * @property {object} def_estructura - Definición de la estructura de la entidad
 * @property {Array} datosespecialestabla - Array para datos especiales de la tabla
 * @property {Dom_validations} domValidations - Instancia de validaciones
 * @property {ExternalAccess} access_functions - Instancia para acceso externo
 * @property {test_IU} tests - Instancia para tests de la interfaz
 */
class Entidad_Abstracta extends Dom {
  /**
   * @constructor
   * @description Inicializa la entidad abstracta con sus componentes básicos.
   * Configura las validaciones, acceso externo y tests, además de inicializar
   * la visualización del workspace.
   * 
   * @param {string} entidad - Nombre de la entidad
   * @param {object} def_estructura - Definición de la estructura de la entidad
   */
  constructor(entidad, def_estructura) {
    super();
	if (eval(this.datosespecialestabla)){}
		else{
			this.datosespecialestabla = Array();
	}
	this.entidad = entidad;
	this.def_estructura = def_estructura; 
	this.domValidations = new Dom_validations(new Validaciones_Atomicas(), entidad);
	this.access_functions = new ExternalAccess();
	this.tests = new test_IU(this.entidad,this);
	document.getElementById("workspace").style.display = "block";
    this.cerrar_test();
    this.SEARCH();
  }

  /**
   * @method cerrar_test
   * @description Cierra la visualización de los tests y limpia los resultados.
   * Oculta el div de tests y limpia los contenidos de las tablas de resultados.
   */
  cerrar_test() { 
    // ... existing code ...
  }

  /**
   * @method SEARCH
   * @description Realiza una búsqueda en la entidad y actualiza la visualización
   * de los resultados en la tabla de datos.
   */
  SEARCH() {
    // ... existing code ...
  }

  /**
   * @method createFormGenerico
   * @description Crea un formulario genérico para una acción específica.
   * Proceso:
   * 1. Carga el formulario
   * 2. Carga los datos si se proporcionan
   * 3. Configura las validaciones
   * 4. Añade el botón de acción
   * 5. Configura los eventos del formulario
   * 
   * @param {string} action - Acción a realizar (ADD, EDIT, DELETE, SEARCH)
   * @param {object} parametros - Parámetros opcionales para cargar en el formulario
   */
  createFormGenerico(action, parametros = null) {
    this.cargar_formulario(action);

    if (parametros) {
      this.load_data(parametros);
      document.getElementById("link_file_" + this.entidad).innerHTML =
        this.change_value_IU(
          "file_" + this.entidad,
          parametros["file_" + this.entidad]
        );
    }

    document.getElementById("class_contenido_titulo_form").className =
      "text_contenido_titulo_form_" + this.entidad + "_" + action;

    this.domValidations.load_validations(action);
    this.colocarboton(action);

    document
      .getElementById("IU_form")
      .setAttribute(
        "onsubmit",
        "return validar.domValidations.submit_test('" + action + "');"
      );
    document
      .getElementById("IU_form")
      .setAttribute("action", "javascript:validar." + action + "();");
    document.getElementById("div_IU_form").style.display = "block";
    setLang();
  }

  /**
   * @method change_value_IU
   * @description Método para transformar valores antes de mostrarlos en la interfaz.
   * Puede ser sobrescrito por las clases hijas para implementar transformaciones específicas.
   * 
   * @param {string} atributo - Nombre del atributo
   * @param {any} valor - Valor a transformar
   * @returns {any} Valor transformado
   */
  change_value_IU(atributo, valor) {
    return valor;
  }

  /**
   * @method cargar_formulario
   * @description Carga el formulario para una acción específica.
   * Intenta usar un método estático si existe, o crea un formulario dinámico.
   * 
   * @param {string} action - Acción para la que cargar el formulario
   */
  cargar_formulario(action) {
    if (eval(this.cargar_formularios_estatico)) {
      this.cargar_formularios_estatico();
    } else {
      this.createForm(action, this.def_estructura);
    }
  }

  /**
   * @method crearTablaDatos
   * @description Crea y configura la tabla de datos.
   * Proceso:
   * 1. Muestra la tabla
   * 2. Construye la estructura de la tabla
   * 3. Configura el selector de columnas
   * 4. Aplica la visibilidad de columnas según configuración
   */
  crearTablaDatos() {
    document.getElementById("id_tabla_datos").style.display = "block";

    //construir tabla
    this.hacertabla();
    //construir select
    this.construirSelect();

    //ocultar segun columnasamostrar
    if (this.datos != "") {
      this.mostrarocultarcolumnas();
    }
  }

  /**
   * @method ADD
   * @description Realiza la operación de añadir un nuevo registro.
   * Proceso:
   * 1. Envía la solicitud al backend
   * 2. Maneja la respuesta
   * 3. Actualiza la interfaz según el resultado
   * 
   * @returns {Promise} Promesa que se resuelve cuando la operación se completa
   */
  async ADD() {
    await this.access_functions
      .back_request("IU_form", this.entidad, "ADD")
      .then((respuesta) => {
        if (respuesta["ok"]) {
          //limpiar el formulario
          this.cargar_formulario("ADD");

          //poner el div del formulario no visible
          document.getElementById("div_IU_form").style.display = "none";

          this.SEARCH();
        } else {
          // mostrar mensaje error action
          // alert('error : '+respuesta['code']);

          // Usando modal
          this.abrirModalError(respuesta["code"]);
        }
      });
  }

  /**
   * @method DELETE
   * @description Realiza la operación de eliminar un registro.
   * Proceso:
   * 1. Envía la solicitud al backend
   * 2. Maneja la respuesta
   * 3. Actualiza la interfaz según el resultado
   * 
   * @returns {Promise} Promesa que se resuelve cuando la operación se completa
   */
  async DELETE() {
    await this.access_functions
      .back_request("IU_form", this.entidad, "DELETE")
      .then((respuesta) => {
        if (respuesta["ok"]) {
          //limpiar el formulario
          this.cargar_formulario("DELETE");

          //poner el div del formulario no visible
          document.getElementById("div_IU_form").style.display = "none";

          this.SEARCH();
        } else {
          // mostrar mensaje error action
          // alert('error : '+respuesta['code']);

          // Usando modal
          this.abrirModalError(respuesta["code"]);
        }
      });
  }

  /**
   * @method EDIT
   * @description Realiza la operación de editar un registro existente.
   * Proceso:
   * 1. Envía la solicitud al backend
   * 2. Maneja la respuesta
   * 3. Actualiza la interfaz según el resultado
   * 
   * @returns {Promise} Promesa que se resuelve cuando la operación se completa
   */
  async EDIT() {
    await this.access_functions
      .back_request("IU_form", this.entidad, "EDIT")
      .then((respuesta) => {
        if (respuesta["ok"]) {
          //limpiar el formulario
          this.cargar_formulario("EDIT");

          //poner el div del formulario no visible
          document.getElementById("div_IU_form").style.display = "none";

          this.SEARCH();
        } else {
          // mostrar mensaje error action
          // alert('error : '+respuesta['code']);

          // Usando modal
          this.abrirModalError(respuesta["code"]);
        }
      });
  }

  /**
   * @method cambiacolumnastabla
   * @description Cambia la visibilidad de una columna específica en la tabla.
   * 
   * @param {string} atributo - Nombre del atributo/columna a modificar
   */
  cambiacolumnastabla(atributo) {
    document.querySelector("th[class='" + atributo + "']").style.display =
      "none";
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Dom.html">Dom</a></li><li><a href="Dom_validations.html">Dom_validations</a></li><li><a href="Entidad_Abstracta.html">Entidad_Abstracta</a></li><li><a href="ExternalAccess.html">ExternalAccess</a></li><li><a href="Validaciones_Atomicas.html">Validaciones_Atomicas</a></li><li><a href="analysis_preparation.html">analysis_preparation</a></li><li><a href="characteristic.html">characteristic</a></li><li><a href="project.html">project</a></li><li><a href="test_IU.html">test_IU</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ADD">ADD</a></li><li><a href="global.html#DELETE">DELETE</a></li><li><a href="global.html#EDIT">EDIT</a></li><li><a href="global.html#SEARCH">SEARCH</a></li><li><a href="global.html#abrirModalError">abrirModalError</a></li><li><a href="global.html#back_request">back_request</a></li><li><a href="global.html#cambiacolumnastabla">cambiacolumnastabla</a></li><li><a href="global.html#cambiarLang">cambiarLang</a></li><li><a href="global.html#cargar_formulario">cargar_formulario</a></li><li><a href="global.html#cerrarModalError">cerrarModalError</a></li><li><a href="global.html#cerrar_test">cerrar_test</a></li><li><a href="global.html#change_value_IU">change_value_IU</a></li><li><a href="global.html#check_special_test_END_DATE_PROJECT">check_special_test_END_DATE_PROJECT</a></li><li><a href="global.html#check_special_tests">check_special_tests</a></li><li><a href="global.html#comprobarCampo">comprobarCampo</a></li><li><a href="global.html#crearTablaDatos">crearTablaDatos</a></li><li><a href="global.html#createField">createField</a></li><li><a href="global.html#createForm">createForm</a></li><li><a href="global.html#createFormGenerico">createFormGenerico</a></li><li><a href="global.html#devolver_def">devolver_def</a></li><li><a href="global.html#file_type">file_type</a></li><li><a href="global.html#format_name_file">format_name_file</a></li><li><a href="global.html#getAttributes">getAttributes</a></li><li><a href="global.html#getCookie">getCookie</a></li><li><a href="global.html#hacertabla">hacertabla</a></li><li><a href="global.html#handleAddField">handleAddField</a></li><li><a href="global.html#handleEditField">handleEditField</a></li><li><a href="global.html#load_validations">load_validations</a></li><li><a href="global.html#max_size">max_size</a></li><li><a href="global.html#max_size_file">max_size_file</a></li><li><a href="global.html#max_size_name_file">max_size_name_file</a></li><li><a href="global.html#min_size">min_size</a></li><li><a href="global.html#min_size_name_file">min_size_name_file</a></li><li><a href="global.html#modificarColumnasTest">modificarColumnasTest</a></li><li><a href="global.html#modificarcolumnasamostrar">modificarcolumnasamostrar</a></li><li><a href="global.html#mostrar_error_campo">mostrar_error_campo</a></li><li><a href="global.html#no_file">no_file</a></li><li><a href="global.html#reg_exp">reg_exp</a></li><li><a href="global.html#resetColumnasTest">resetColumnasTest</a></li><li><a href="global.html#resolve_def_test">resolve_def_test</a></li><li><a href="global.html#resolve_pruebas">resolve_pruebas</a></li><li><a href="global.html#setCookie">setCookie</a></li><li><a href="global.html#setLang">setLang</a></li><li><a href="global.html#submit_test">submit_test</a></li><li><a href="global.html#test_run">test_run</a></li><li><a href="global.html#textos_EN">textos_EN</a></li><li><a href="global.html#textos_ES">textos_ES</a></li><li><a href="global.html#traduccion">traduccion</a></li><li><a href="global.html#validacionesespeciales">validacionesespeciales</a></li><li><a href="global.html#verificarPruebas">verificarPruebas</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Sun Jun 15 2025 11:31:54 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
